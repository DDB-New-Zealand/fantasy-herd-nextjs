"use client";

import {
  motion,
  MotionValue,
  transform,
  useAnimationFrame,
  useMotionValue,
} from "motion/react";

type Props = {
  rotation: MotionValue<number>;
  highlighOffset: MotionValue<number>;
};

const MoolahToken: React.FC<Props> = (props) => {
  const { rotation, highlighOffset } = props;

  const highlightY = useMotionValue(0);
  const highlightBorderY = useMotionValue(0);

  const sparkleScale1 = useMotionValue(0);
  const sparkleScale2 = useMotionValue(0);

  useAnimationFrame(() => {
    const now = Date.now();

    sparkleScale1.set(Math.sin(now * 0.001) * 0.5 + 0.5);
    sparkleScale2.set(Math.sin(now * 0.001 + Math.PI / 3) * 0.5 + 0.5);

    const highlightOffsetY = highlighOffset.get() * 300;
    const highlightBorderOffsetY = highlighOffset.get() * 400;
    const highlightTransformY = transform(rotation.get(), [-60, 60], [0, 300]);
    const highlightBorderTransformY = transform(
      rotation.get(),
      [-100, 100],
      [0, 200],
    );

    highlightY.set(((highlightTransformY + highlightOffsetY) % 300) - 150);
    highlightBorderY.set(
      ((highlightBorderTransformY + highlightBorderOffsetY) % 400) - 100,
    );
  });

  return (
    <motion.div
      className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
      style={{
        width: 211,
        height: 173,
        rotateY: rotation,
      }}
    >
      <div
        className="absolute top-1/2 left-1/2 -translate-x-[calc(50%+10px)] -translate-y-[calc(50%-10px)] bg-moss-green"
        style={{
          width: 211,
          height: 173,
          clipPath: `url("#moolah-clip-path-back")`,
        }}
      >
        <motion.div
          className="absolute top-[44%] left-[12%] w-[158px] h-[32px] bg-white/20 rotate-[-48deg] -translate-x-1/2"
          style={{
            y: highlightBorderY,
          }}
        />
        <motion.div
          className="absolute top-[82%] left-[18%] w-[158px] h-[38px] bg-white/20 rotate-[-48deg] -translate-x-1/2"
          style={{
            y: highlightBorderY,
          }}
        ></motion.div>

        <motion.div
          className="absolute top-[82%] left-[70%] w-[158px] h-[16px] bg-white/20 rotate-[-48deg] -translate-x-1/2"
          style={{
            y: highlightBorderY,
          }}
        ></motion.div>
        <div className="absolute bg-moss-green top-[87%] left-[12%] w-[32px] h-[3px] rotate-[-48deg]" />

        {/* <motion.div
          className="absolute bottom-[4%] left-[32%] w-[48px] h-[42px] bg-white/20 rotate-[-42deg] -translate-x-1/2"
          style={{
            y: highlightBorderY,
          }}
        >
          <div className="absolute bg-moss-green bottom-[24%] left-0 w-full h-[3px]" />
        </motion.div>
        <motion.div
          className="absolute bottom-[5%] right-[8%] w-[48px] h-[8px] bg-white/20 rotate-[-58deg] -translate-x-1/2"
          style={{
            y: highlightBorderY,
          }}
        /> */}
      </div>
      <svg width="0" height="0" xmlns="http://www.w3.org/2000/svg">
        <clipPath
          id="moolah-clip-path-back"
          transform="translate(0 0)"
          clipPathUnits="userSpaceOnUse"
        >
          <path
            d="M69.334 2.12915L70.1367 2.14087H70.1494L70.1611 2.14185C78.847 2.41154 89.4754 6.85911 94.8779 18.05L104.255 36.7473L113.631 18.05C115.093 15.0205 116.945 12.4759 119.047 10.3733C124.925 4.49291 132.683 2.12922 139.2 2.12915H154.185L155.307 2.15259L155.323 2.15356H155.341C161.318 2.4153 168.02 4.67903 173.401 10.0598C179.141 15.7995 181.331 23.0429 181.332 29.3079V71.594L184.089 71.8108H184.088C196.958 72.8171 204.901 80.8264 207.767 90.3752C210.608 99.8439 208.479 110.898 201.249 118.126C197.41 121.964 192.175 124.675 185.602 125.495L185.566 125.499L184.119 125.646L184.103 125.648L184.085 125.649L181.332 125.863V143.548C181.332 149.62 179.276 156.606 173.932 162.254L173.404 162.796C168.028 168.172 161.326 170.442 155.344 170.705H155.326L155.31 170.706L154.185 170.73H137.352C131.077 170.729 123.837 168.531 118.103 162.796C116.901 161.594 115.86 160.323 114.959 159.012C108.15 161.855 100.359 161.857 93.5498 159.015C92.7944 160.115 91.9408 161.188 90.9746 162.215L90.4121 162.796C85.0363 168.172 78.3344 170.442 72.3516 170.705H72.334L72.3174 170.706L71.1924 170.73H54.3594C48.0854 170.729 40.8451 168.531 35.1104 162.796C29.3732 157.058 27.1807 149.816 27.1807 143.548V125.708L26.3994 125.649H26.3984C13.5275 124.643 5.58359 116.633 2.7168 107.084C-0.125777 97.6153 2.00248 86.5602 9.23242 79.3323C13.3644 75.2015 19.1107 72.3799 26.3955 71.8108L27.1807 71.7483V29.3079L27.1865 28.718C27.3209 22.5919 29.5502 15.6202 35.1104 10.0598H35.1113C40.8506 4.32101 48.0931 2.12947 54.3594 2.12915H69.334Z"
            stroke="#0D180D"
            stroke-width="3"
          />
        </clipPath>
        <clipPath
          id="moolah-clip-path-fore"
          transform="scale(0.98) translate(2 2)"
          clipPathUnits="userSpaceOnUse"
        >
          <path
            d="M69.334 2.12915L70.1367 2.14087H70.1494L70.1611 2.14185C78.847 2.41154 89.4754 6.85911 94.8779 18.05L104.255 36.7473L113.631 18.05C115.093 15.0205 116.945 12.4759 119.047 10.3733C124.925 4.49291 132.683 2.12922 139.2 2.12915H154.185L155.307 2.15259L155.323 2.15356H155.341C161.318 2.4153 168.02 4.67903 173.401 10.0598C179.141 15.7995 181.331 23.0429 181.332 29.3079V71.594L184.089 71.8108H184.088C196.958 72.8171 204.901 80.8264 207.767 90.3752C210.608 99.8439 208.479 110.898 201.249 118.126C197.41 121.964 192.175 124.675 185.602 125.495L185.566 125.499L184.119 125.646L184.103 125.648L184.085 125.649L181.332 125.863V143.548C181.332 149.62 179.276 156.606 173.932 162.254L173.404 162.796C168.028 168.172 161.326 170.442 155.344 170.705H155.326L155.31 170.706L154.185 170.73H137.352C131.077 170.729 123.837 168.531 118.103 162.796C116.901 161.594 115.86 160.323 114.959 159.012C108.15 161.855 100.359 161.857 93.5498 159.015C92.7944 160.115 91.9408 161.188 90.9746 162.215L90.4121 162.796C85.0363 168.172 78.3344 170.442 72.3516 170.705H72.334L72.3174 170.706L71.1924 170.73H54.3594C48.0854 170.729 40.8451 168.531 35.1104 162.796C29.3732 157.058 27.1807 149.816 27.1807 143.548V125.708L26.3994 125.649H26.3984C13.5275 124.643 5.58359 116.633 2.7168 107.084C-0.125777 97.6153 2.00248 86.5602 9.23242 79.3323C13.3644 75.2015 19.1107 72.3799 26.3955 71.8108L27.1807 71.7483V29.3079L27.1865 28.718C27.3209 22.5919 29.5502 15.6202 35.1104 10.0598H35.1113C40.8506 4.32101 48.0931 2.12947 54.3594 2.12915H69.334Z"
            stroke="#0D180D"
            stroke-width="3"
          />
        </clipPath>
      </svg>
      <svg
        width="211"
        height="173"
        viewBox="0 0 211 173"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute top-1/2 left-1/2 -translate-x-[calc(50%+10px)] -translate-y-[calc(50%-10px)]"
      >
        <path
          d="M69.334 2.12915L70.1367 2.14087H70.1494L70.1611 2.14185C78.847 2.41154 89.4754 6.85911 94.8779 18.05L104.255 36.7473L113.631 18.05C115.093 15.0205 116.945 12.4759 119.047 10.3733C124.925 4.49291 132.683 2.12922 139.2 2.12915H154.185L155.307 2.15259L155.323 2.15356H155.341C161.318 2.4153 168.02 4.67903 173.401 10.0598C179.141 15.7995 181.331 23.0429 181.332 29.3079V71.594L184.089 71.8108H184.088C196.958 72.8171 204.901 80.8264 207.767 90.3752C210.608 99.8439 208.479 110.898 201.249 118.126C197.41 121.964 192.175 124.675 185.602 125.495L185.566 125.499L184.119 125.646L184.103 125.648L184.085 125.649L181.332 125.863V143.548C181.332 149.62 179.276 156.606 173.932 162.254L173.404 162.796C168.028 168.172 161.326 170.442 155.344 170.705H155.326L155.31 170.706L154.185 170.73H137.352C131.077 170.729 123.837 168.531 118.103 162.796C116.901 161.594 115.86 160.323 114.959 159.012C108.15 161.855 100.359 161.857 93.5498 159.015C92.7944 160.115 91.9408 161.188 90.9746 162.215L90.4121 162.796C85.0363 168.172 78.3344 170.442 72.3516 170.705H72.334L72.3174 170.706L71.1924 170.73H54.3594C48.0854 170.729 40.8451 168.531 35.1104 162.796C29.3732 157.058 27.1807 149.816 27.1807 143.548V125.708L26.3994 125.649H26.3984C13.5275 124.643 5.58359 116.633 2.7168 107.084C-0.125777 97.6153 2.00248 86.5602 9.23242 79.3323C13.3644 75.2015 19.1107 72.3799 26.3955 71.8108L27.1807 71.7483V29.3079L27.1865 28.718C27.3209 22.5919 29.5502 15.6202 35.1104 10.0598H35.1113C40.8506 4.32101 48.0931 2.12947 54.3594 2.12915H69.334Z"
          stroke="#0D180D"
          stroke-width="3"
        />
      </svg>

      <svg
        width="211"
        height="173"
        viewBox="0 0 211 173"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute top-1/2 left-1/2 -translate-1/2"
      >
        <path
          d="M69.334 1.93579L70.1367 1.94751H70.1494L70.1611 1.94849C78.847 2.21818 89.4754 6.66575 94.8779 17.8567L104.255 36.554L113.631 17.8567C119.211 6.29595 130.367 1.93589 139.2 1.93579H154.185L155.307 1.95923L155.323 1.96021H155.341C161.318 2.22194 168.02 4.48567 173.401 9.86646C179.141 15.6062 181.331 22.8496 181.332 29.1145V71.4006L184.089 71.6174H184.088C216.815 74.1764 217.226 121.356 185.602 125.302L185.566 125.306L184.119 125.452L184.103 125.454L184.085 125.455L181.332 125.669V143.355C181.332 149.427 179.276 156.413 173.932 162.061L173.404 162.603C168.028 167.979 161.326 170.249 155.344 170.512H155.326L155.31 170.513L154.185 170.536H137.352C131.077 170.536 123.837 168.337 118.103 162.603C116.901 161.401 115.86 160.13 114.959 158.819C108.15 161.661 100.359 161.664 93.5498 158.822C92.7944 159.922 91.9408 160.995 90.9746 162.022L90.4121 162.603C85.0363 167.979 78.3344 170.249 72.3516 170.512H72.334L72.3174 170.513L71.1924 170.536H54.3594C48.0854 170.536 40.8451 168.338 35.1104 162.603C29.3732 156.864 27.1807 149.623 27.1807 143.355V125.515L26.3994 125.455H26.3984C-6.80725 122.861 -6.79064 74.2102 26.3955 71.6174L27.1807 71.5549V29.1145L27.1865 28.5247C27.3209 22.3985 29.5502 15.4269 35.1104 9.86646H35.1113C40.8506 4.12765 48.0931 1.93611 54.3594 1.93579H69.334Z"
          fill="white"
          stroke="#0D180D"
          stroke-width="3"
        />
        <path
          d="M69.3135 13.9358L69.8154 13.9436C75.0322 14.1044 81.1338 16.7771 84.1729 23.2727L104.256 63.3293L124.357 23.2366C127.501 16.5573 133.889 13.9359 139.201 13.9358H154.154L154.829 13.9504C158.223 14.0993 161.948 15.3808 164.918 18.3508C168.086 21.5191 169.333 25.5466 169.333 29.1145V82.5002L183.152 83.5823C201.45 85.013 201.59 111.629 183.581 113.452L183.152 113.49L169.333 114.569V143.355C169.333 146.923 168.086 150.95 164.919 154.118H164.918C161.948 157.088 158.224 158.373 154.829 158.522L154.154 158.536H137.353C133.783 158.536 129.757 157.286 126.589 154.118C123.421 150.95 122.174 146.923 122.174 143.355V132.061L118.061 140.388L118.055 140.402L118.027 140.462L117.995 140.521L117.98 140.547C112.307 151.782 96.1383 151.764 90.501 140.49L90.4863 140.459L90.4727 140.428L90.4609 140.402L86.3408 132.061V143.355C86.3408 146.923 85.0942 150.95 81.9268 154.118H81.9258C78.9561 157.088 75.2316 158.373 71.8369 158.522L71.1621 158.536H54.3604C50.7913 158.536 46.7645 157.286 43.5967 154.118C40.4289 150.95 39.1816 146.923 39.1816 143.355V114.413L27.332 113.49C8.88814 112.05 8.89143 85.0229 27.332 83.5823L39.1816 82.6555V29.1145L39.1963 28.4407C39.345 25.0466 40.6264 21.3212 43.5967 18.3508C46.765 15.1827 50.7923 13.936 54.3604 13.9358H69.3135Z"
          fill="#CAFDC3"
          stroke="#0D180D"
          stroke-width="3"
        />
        <path
          d="M105.938 134.452C105.265 135.796 103.25 135.796 102.578 134.452L74.6895 78.0038C74.3535 77.1638 72.8415 77.1638 72.8415 78.5078V143.356C72.8415 144.364 72.1695 145.036 71.1615 145.036H54.3615C53.3535 145.036 52.6815 144.364 52.6815 143.356V29.1158C52.6815 28.1078 53.3535 27.4358 54.3615 27.4358H69.3135C70.4895 27.4358 71.4975 27.9398 72.0015 29.1158L103.082 91.1078C103.586 92.2838 104.93 92.2838 105.434 91.1078L136.514 29.1158C137.017 27.9398 138.025 27.4358 139.202 27.4358H154.154C155.162 27.4358 155.833 28.1078 155.833 29.1158V143.356C155.833 144.364 155.162 145.036 154.154 145.036H137.354C136.346 145.036 135.673 144.364 135.673 143.356V78.5078C135.673 77.1638 134.161 77.1638 133.826 78.0038L105.938 134.452Z"
          fill="#0D180D"
        />
        <path
          d="M28.3832 100.031C26.5389 99.8872 26.5389 97.1844 28.3832 97.0404L105.125 91.0449C105.202 91.0388 105.281 91.0388 105.358 91.0449L182.1 97.0404C183.944 97.1844 183.944 99.8872 182.1 100.031L105.358 106.027C105.281 106.033 105.202 106.033 105.125 106.027L28.3832 100.031Z"
          fill="#0D180D"
        />
      </svg>

      <div
        className="absolute inset-0"
        style={{
          clipPath: `url("#moolah-clip-path-fore")`,
        }}
      >
        <motion.div
          className="absolute w-[200%] h-[20px] bg-white/20 rotate-45 top-[72px] left-1/2 -translate-x-1/2"
          style={{
            y: highlightY,
          }}
        ></motion.div>
        <motion.div
          className="absolute w-[200%] h-[40px] bg-white/20 rotate-45 top-[0px] left-1/2 -translate-x-1/2"
          style={{
            y: highlightY,
          }}
        ></motion.div>
      </div>

      <motion.svg
        width="70"
        height="70"
        viewBox="0 0 70 70"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute top-[8%] left-[80%] -translate-1/2"
        style={{
          scale: sparkleScale1,
        }}
      >
        <path
          d="M30.5537 6.03027C31.3421 0.950494 38.6579 0.95044 39.4463 6.03027L42.5947 26.3125C42.695 26.9579 43.2012 27.4642 43.8467 27.5645L64.1289 30.7129C69.2087 31.5013 69.2087 38.8171 64.1289 39.6055L43.8467 42.7539C43.2012 42.8541 42.695 43.3604 42.5947 44.0059L39.4463 64.2881C38.6579 69.3679 31.3421 69.3679 30.5537 64.2881L27.4053 44.0059C27.305 43.3604 26.7988 42.8541 26.1533 42.7539L5.87109 39.6055C0.791314 38.8171 0.791261 31.5013 5.87109 30.7129L26.1533 27.5645C26.7988 27.4642 27.305 26.9579 27.4053 26.3125L30.5537 6.03027Z"
          fill="white"
          stroke="#0D180D"
          strokeWidth="3"
        />
      </motion.svg>
      <motion.svg
        width="32"
        height="32"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute top-[90%] left-[20%] -translate-1/2"
        style={{
          scale: sparkleScale2,
        }}
      >
        <path
          d="M13.0352 4.47949C13.5608 1.09307 18.4392 1.09308 18.9648 4.47949L20.1357 12.0234L27.6797 13.1943C31.0661 13.72 31.0661 18.5984 27.6797 19.124L20.1357 20.2949L18.9648 27.8389C18.4392 31.2253 13.5608 31.2253 13.0352 27.8389L11.8643 20.2949L4.32031 19.124C0.933892 18.5984 0.933898 13.72 4.32031 13.1943L11.8643 12.0234L13.0352 4.47949Z"
          fill="white"
          stroke="#0D180D"
          strokeWidth="3"
        />
      </motion.svg>
    </motion.div>
  );
};

export default MoolahToken;
